# üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloudflare Worker

## –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

–°–µ–π—á–∞—Å API –∫–ª—é—á OpenRouter —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø—Ä—è–º–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, —á—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ - –ª—é–±–æ–π –º–æ–∂–µ—Ç –µ–≥–æ –∏–∑–≤–ª–µ—á—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞ —Ç–≤–æ–π —Å—á–µ—Ç. Cloudflare Worker —Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É, —Å–∫—Ä—ã–≤–∞—è –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

## üìù –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ Cloudflare

1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ https://dash.cloudflare.com/sign-up
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ email

---

## üõ†Ô∏è –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Wrangler CLI

–û—Ç–∫—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏:

```bash
npm install -g wrangler
```

–ü—Ä–æ–≤–µ—Ä—å —É—Å—Ç–∞–Ω–æ–≤–∫—É:

```bash
wrangler --version
```

---

## üîë –®–∞–≥ 3: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Cloudflare

```bash
wrangler login
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä - –∞–≤—Ç–æ—Ä–∏–∑—É–π—Å—è –≤ Cloudflare.

---

## üì§ –®–∞–≥ 4: –î–µ–ø–ª–æ–π Worker

1. –ü–µ—Ä–µ–π–¥–∏ –≤ –ø–∞–ø–∫—É —Å worker:

```bash
cd cloudflare-worker
```

2. –ó–∞–¥–µ–ø–ª–æ–π worker:

```bash
wrangler deploy
```

3. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è —Ç—ã –ø–æ–ª—É—á–∏—à—å URL, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```
https://recipe-ai-proxy.your-subdomain.workers.dev
```

**–í–ê–ñ–ù–û: –°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ—Ç URL!**

---

## üîê –®–∞–≥ 5: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ API –∫–ª—é—á–∞

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å OpenRouter API –∫–ª—é—á –∫–∞–∫ —Å–µ–∫—Ä–µ—Ç:

```bash
wrangler secret put OPENROUTER_API_KEY
```

–ö–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø—Ä–æ—Å, –≤—Å—Ç–∞–≤—å —Å–≤–æ–π OpenRouter API –∫–ª—é—á –∏ –Ω–∞–∂–º–∏ Enter.

---

## ‚öôÔ∏è –®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 6.1. –û–±–Ω–æ–≤–∏ app.config.js

–û—Ç–∫—Ä–æ–π `app.config.js` –∏ –∏–∑–º–µ–Ω–∏:

```javascript
extra: {
  // –£–¥–∞–ª–∏ —ç—Ç—É —Å—Ç—Ä–æ–∫—É:
  // openRouterApiKey: process.env.OPENROUTER_API_KEY || '',

  // –î–æ–±–∞–≤—å –≤–º–µ—Å—Ç–æ –Ω–µ—ë:
  workerUrl: 'https://recipe-ai-proxy.your-subdomain.workers.dev', // –¢–≤–æ–π URL worker

  eas: {
    projectId: "e578b835-08ae-4134-9a08-5a8830f77045"
  }
}
```

### 6.2. –ó–∞–º–µ–Ω–∏ —Ñ–∞–π–ª—ã

1. **–£–¥–∞–ª–∏ —Å—Ç–∞—Ä—ã–π apiConfig.ts:**
```bash
rm constants/apiConfig.ts
```

2. **–ü–µ—Ä–µ–∏–º–µ–Ω—É–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª:**
```bash
mv constants/apiConfig.new.ts constants/apiConfig.ts
```

3. **–£–¥–∞–ª–∏ —Å—Ç–∞—Ä—ã–π aiService.ts:**
```bash
rm utils/aiService.ts
```

4. **–ü–µ—Ä–µ–∏–º–µ–Ω—É–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª:**
```bash
mv utils/aiService.new.ts utils/aiService.ts
```

### 6.3. –£–¥–∞–ª–∏ .env —Ñ–∞–π–ª –∏–∑ git

–û—Ç–∫—Ä–æ–π `.gitignore` –∏ –¥–æ–±–∞–≤—å:

```
.env
.env.local
```

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏:

```bash
git rm --cached .env
```

---

## ‚úÖ –®–∞–≥ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
npm start
```

2. –ü–æ–ø—Ä–æ–±—É–π –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç - —Ç–µ–ø–µ—Ä—å –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ Cloudflare Worker!

---

## üîç –®–∞–≥ 8: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ https://dash.cloudflare.com/
2. –í—ã–±–µ—Ä–∏ Workers & Pages
3. –ö–ª–∏–∫–Ω–∏ –Ω–∞ —Å–≤–æ–π worker (recipe-ai-proxy)
4. –í–∫–ª–∞–¥–∫–∞ "Metrics" - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
5. –í–∫–ª–∞–¥–∫–∞ "Logs" - –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## üí∞ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã

Cloudflare Workers –±–µ—Å–ø–ª–∞—Ç–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- ‚úÖ 100,000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å
- ‚úÖ 10ms CPU time –Ω–∞ –∑–∞–ø—Ä–æ—Å
- ‚úÖ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers

–≠—Ç–æ–≥–æ –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ç–≤–æ–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!

---

## üêõ –ü—Ä–æ–±–ª–µ–º—ã?

### Worker –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:
```bash
wrangler tail
```

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
cd cloudflare-worker
wrangler dev
```

Worker –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ `http://localhost:8787`

–ò–∑–º–µ–Ω–∏ –≤ app.config.js –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```javascript
workerUrl: 'http://localhost:8787'
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —Ç–≤–æ–π API –∫–ª—é—á –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- ‚úÖ –•—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ Cloudflare
- ‚úÖ –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ APK —Ñ–∞–π–ª–∞
- ‚úÖ –ó–∞—â–∏—â–µ–Ω –æ—Ç –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤

---

## üìå –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å .env —Ñ–∞–π–ª—ã –≤ git!**
2. **Worker URL –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è**
3. **API –∫–ª—é—á –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π:**
   ```bash
   wrangler secret put OPENROUTER_API_KEY
   ```
4. **–°–ª–µ–¥–∏ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∞ https://openrouter.ai/activity**

---

## üÜò –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Cloudflare Workers: https://developers.cloudflare.com/workers/
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Wrangler: https://developers.cloudflare.com/workers/wrangler/
